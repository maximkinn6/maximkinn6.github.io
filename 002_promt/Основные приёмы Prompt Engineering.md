---
layout: default
title: Основные приёмы Prompt Engineering
description: description
---

# Основные приёмы Prompt Engineering

Промпт-инжиниринг включает в себя разнообразные техники и методики, направленные на оптимизацию взаимодействия с большими языковыми моделями (LLM) для получения желаемых результатов. Эти приёмы касаются структурирования запросов, предоставления контекста, управления стилем вывода и улучшения способности модели к рассуждению. Поскольку LLM генерируют ответ, предсказывая следующие токены на основе входного промпта, качество и структура этого промпта напрямую влияют на результат. Основные приёмы промпт-инжиниринга позволяют разработчикам и пользователям эффективно управлять поведением модели, снижать ошибки и адаптировать её к конкретным задачам без необходимости изменения внутренних параметров модели.


**Содержание**
1. Базовые Принципы и Структура Промпта
2. Основные Техники Инструкций и Примеров
3. Техники Управления Контекстом
4. Техники Улучшения Рассуждений (Reasoning)
5. Продвинутые Техники: Агенты и Инструменты
6. Техники Снижения Ошибок и Галлюцинаций
7. Техники Оценки и Итерации
8. Паттерны Промптов
9. Заключение
10. См. также

## Базовые Принципы и Структура Промпта
Хотя конкретные реализации варьируются, эффективные промпты часто строятся с учетом общих принципов и структуры:

**Пять принципов**: Дать Направление, Указать Формат, Предоставить Примеры, Оценить Качество, Разделить Задачу — служат общими ориентирами.
**Анатомия Промпта:** Часто включает:
**Введение/Роль**: Задает контекст задачи или роль/персону модели.
**Инструкции**: Четкие указания, что нужно сделать.
**Контекст**: Необходимая информация (статическая или динамически извлеченная через RAG).
**Примеры (Few-shot):** Демонстрация желаемого формата/стиля.
Запрос ответа: Явное указание, что модель должна сгенерировать.
**Системное сообщение (System Prompt):** В чат-интерфейсах API (ChatGPT, Claude) позволяет задать глобальные инструкции и роль для всей сессии.
Форматирование: Использование Markdown, JSON, XML или YAML помогает структурировать промпт и облегчает парсинг ответа. Разделители (```, `"""`, теги) важны для отделения инструкций от данных.
Основные Техники Инструкций и Примеров
Четкие и Конкретные Инструкции: Максимально точно описать задачу, желаемый результат и ограничения. Избегать двусмысленности.
Ролевое Моделирование (Role Prompting): Назначение модели роли ("Ты - эксперт по...") для управления тоном, стилем и базой знаний.
Zero-shot Prompting: Запрос без примеров. Эффективен для простых или хорошо знакомых модели задач.
Few-Shot Prompting: Предоставление 1-5 примеров "вопрос-ответ" для демонстрации задачи. Особенно полезно для сложных форматов или стилей. Требует осторожности, чтобы избежать смещения (anchoring) или улавливания ложных паттернов из примеров.
Техники Управления Контекстом
Retrieval-Augmented Generation (RAG): Динамическое добавление релевантной информации из внешних баз знаний (часто векторных) в промпт перед отправкой LLM. Ключевой метод борьбы с галлюцинациями и обеспечения актуальности.
Чанкинг (Chunking): Разбиение больших текстов на меньшие части, чтобы уложиться в контекстное окно модели. Стратегии включают разбиение по предложениям, параграфам, токенам (с перекрытием).
Суммаризация: Сжатие длинных текстов или истории диалога для передачи основного смысла в ограниченном контексте.
Техники Улучшения Рассуждений (Reasoning)
Эти техники направлены на то, чтобы заставить модель "думать" более тщательно и структурированно:

Chain-of-Thought (CoT): Инструкция модели генерировать пошаговое рассуждение перед финальным ответом (например, "Думай по шагам"). Существенно улучшает результаты в математике, логике и многоэтапных задачах.
Вариации CoT: Включают Auto-CoT (автоматическая генерация примеров), Self-Consistency (голосование по нескольким CoT), LogiCoT (логическая верификация), Tree-of-Thoughts (исследование дерева рассуждений), Graph-of-Thought (графовые рассуждения) и другие, направленные на повышение надежности или специфичности рассуждений.
ReAct (Reason and Act): Итеративный цикл, где модель чередует шаги Рассуждения (Thought) и Действия с использованием Инструментов (Act), обновляя свое понимание на основе Наблюдений (Observation).
Self-Refine: Модель итеративно критикует и улучшает свой собственный вывод на основе обратной связи (внутренней или внешней).
Take a Step Back Prompting: Модель сначала формулирует общие принципы или абстракции, а затем применяет их к конкретной задаче.
Продвинутые Техники: Агенты и Инструменты
Использование Инструментов (Tool Usage) / Функциональный вызов (Function Calling): Предоставление LLM возможности вызывать внешние API (поиск, калькулятор, БД). Модель генерирует запрос на вызов инструмента, который выполняется приложением, а результат возвращается модели для дальнейшей обработки.
Агенты (Agents): Системы на базе LLM, которые могут автономно планировать, использовать инструменты и действовать для достижения цели. Часто используют ReAct-подобные циклы. Фреймворки (LangChain, AutoGen, CrewAI) упрощают их создание.
Многоагентные системы: Взаимодействие нескольких специализированных агентов для решения комплексных задач.
Техники Снижения Ошибок и Галлюцинаций
RAG: Привязка ответов к извлеченным фактическим данным.
Инструкции по ограничению ответа: Требование отвечать только на основе предоставленного контекста или указывать на неуверенность ("Если ответ неизвестен, скажи 'Я не знаю'").
Запрос цитирования: Требование модели указывать источники или цитировать части контекста, на которых основан ответ.
Верификация и Самокритика: Использование CoVe, Self-Refine или просто запрос к модели проверить свой ответ на ошибки.
CoT: Пошаговое рассуждение само по себе может снизить логические ошибки.
Техники Оценки и Итерации
Хотя оценка — это отдельный процесс, некоторые её аспекты являются частью промпт-инжиниринга:

A/B Тестирование Промптов: Сравнение эффективности разных версий промптов на одних и тех же задачах.
Использование LLM для Оценки: Применение мощной модели (например, GPT-4) для оценки качества ответов, сгенерированных другим промптом или моделью (LLM-as-a-Judge).
Паттерны Промптов
Распространенные переиспользуемые структуры:

Паттерн Персоны (Persona Pattern).
Паттерн Кастомизации Вывода (Output Customization Pattern).
Паттерн Запроса Уточнений (Question Refinement Pattern).
Паттерн Когнитивной Верификации / Самокритики (Cognitive Verifier / Self-Critique Pattern).
Паттерн Пошагового Рассуждения (Step-by-Step / Chain-of-Thought Pattern).
Паттерн Шаблона (Template Pattern).
Заключение
Эффективный промпт-инжиниринг требует комбинации различных техник, понимания ограничений модели и итеративного подхода к тестированию и улучшению промптов. Выбор конкретных приёмов зависит от задачи, используемой модели и требуемого качества результата.